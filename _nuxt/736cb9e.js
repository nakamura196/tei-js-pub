(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{338:function(t,e,r){var content=r(372);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(58).default)("1b7833da",content,!0,{sourceMap:!1})},346:function(t,e,r){"use strict";r.r(e);r(213);var n=r(14),o=r(27),c=r(23),l=r(18),f=r(11),d=r(13),v=r(118);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var h=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},y=function(t){Object(c.a)(r,t);var e=m(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(o.a)(r,[{key:"xml",get:function(){return this.$store.getters.getXml},set:function(t){this.$store.commit("setXml",t)}},{key:"title",get:function(){var t=this.xml;return t&&t.querySelector("tei-title")?t.querySelector("tei-title").textContent:"TEI Viewer"}}]),r}(v.Vue),w=y=h([Object(v.Component)({})],y),x=r(70),component=Object(x.a)(w,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v("\n  "+this._s(this.title)+"\n")])}),[],!1,null,null,null);e.default=component.exports},371:function(t,e,r){"use strict";r(338)},372:function(t,e,r){(e=r(57)(!1)).push([t.i,".scroll{overflow-y:auto}.vertical{-ms-writing-mode:tb-rl;writing-mode:vertical-rl}tei-persName{background-color:#ffccbc}tei-placeName{background-color:#c8e6c9}tei-date{background-color:#bbdefb}tei-time{background-color:#fff9c4}tei-head{margin:20px;font-size:large!important;font-weight:700}",""]),t.exports=e},397:function(t,e,r){"use strict";r.r(e);r(213);var n=r(14),o=r(27),c=r(23),l=r(18),f=r(11),d=r(13),v=r(118),m=r(155),h=r.n(m);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var w=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},x=function(t){Object(c.a)(r,t);var e=y(r);function r(){var t;return Object(n.a)(this,r),(t=e.apply(this,arguments)).model=0,t}return Object(o.a)(r,[{key:"scroll",value:function(t){var e=document.querySelector("#"+t).getBoundingClientRect(),r={container:"#container",offset:-1*document.querySelector("#container").getBoundingClientRect().width+e.width,x:!0};h.a.scrollTo("#"+t,0,r)}},{key:"xml",get:function(){return this.$store.getters.getXml},set:function(t){this.$store.commit("setXml",t)}},{key:"items",get:function(){var t=this.xml;if(!t)return[];for(var e=[],r=t.querySelectorAll("div"),i=0;i<r.length;i++)for(var div=r[i],n=div.children,o=0;o<n.length;o++){var c=n[o];if("head"===c.nodeName){var l=div.attributes["xml:id"].value;e.push({label:c.textContent,id:l}),this.id===l&&(this.model=e.length-1)}}return e}}]),r}(v.Vue);w([Object(v.Prop)()],x.prototype,"id",void 0);var j=x=w([Object(v.Component)({})],x),_=r(70),O=r(98),R=r.n(O),V=r(326),k=r(322),C=r(331),$=r(311),L=r(349),component=Object(_.a)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-list",[r("v-list-item",{staticClass:"mt-5"},[r("v-list-item-title",[r("h3",[t._v(t._s(t.$t("コンテンツ")))])])],1),t._v(" "),r("v-list-item-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.items,(function(e,n){return r("v-list-item",{key:n,attrs:{link:""},on:{click:function(r){return t.scroll(e.id)}}},[r("v-list-item-action"),t._v(" "),r("v-list-item-content",[t._v(" "+t._s(e.label)+" ")])],1)})),1)],1)}),[],!1,null,null,null);e.default=component.exports;R()(component,{VList:V.a,VListItem:k.a,VListItemAction:C.a,VListItemContent:$.a,VListItemGroup:L.a,VListItemTitle:$.b})},409:function(t,e,r){"use strict";r.r(e);r(21),r(22),r(40);var n=r(396),o=r(155),c=r.n(o),l=r(350),f=r.n(l),d=(r(213),r(14)),v=r(27),m=r(23),h=r(18),y=r(11),w=r(13),x=r(118);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(y.a)(t);if(e){var o=Object(y.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var _=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(w.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},O=function(t){Object(m.a)(r,t);var e=j(r);function r(){var t;return Object(d.a)(this,r),(t=e.apply(this,arguments)).model=0,t}return Object(v.a)(r,[{key:"scroll",value:function(t){var e={container:"#container",offset:-1*document.querySelector("#container").getBoundingClientRect().width,x:!0};c.a.scrollTo("#"+t,500,e)}},{key:"xml",get:function(){return this.$store.getters.getXml},set:function(t){this.$store.commit("setXml",t)}},{key:"items",get:function(){var t=this.xml;if(!t)return[];for(var e=[],r=t.querySelectorAll("tei-div"),i=0;i<r.length;i++)for(var div=r[i],n=div.children,o=0;o<n.length;o++){var c=n[o];if("TEI-HEAD"===c.nodeName){if(!div.attributes["xml:id"])continue;var l=div.attributes["xml:id"].value;e.push({label:c.textContent,id:l}),this.id===l&&(this.model=e.length-1)}}return e}}]),r}(x.Vue);_([Object(x.Prop)()],O.prototype,"id",void 0);var R=O=_([Object(x.Component)({})],O),V=r(70),k=r(98),C=r.n(k),$=r(326),L=r(322),T=r(331),I=r(311),P=r(349),component=Object(V.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-list",[r("v-list-item",{staticClass:"mt-5"},[r("v-list-item-title",[r("h3",[t._v(t._s(t.$t("コンテンツ")))])])],1),t._v(" "),r("v-list-item-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.items,(function(e,n){return r("v-list-item",{key:n,attrs:{link:""},on:{click:function(r){return t.scroll(e.id)}}},[r("v-list-item-action"),t._v(" "),r("v-list-item-content",[t._v(" "+t._s(e.label)+" ")])],1)})),1)],1)}),[],!1,null,null,null),S=component.exports;C()(component,{VList:$.a,VListItem:L.a,VListItemAction:T.a,VListItemContent:I.a,VListItemGroup:P.a,VListItemTitle:I.b});var E={components:{Menu:S,Title:r(346).default},data:function(){return{baseUrl:"https://nakamura196.github.io/tei-js-pub",siteName:"TEI Viewer",github:"https://github.com/shibusawa-lab/lab1",loading:!1,width:window.innerWidth,height:window.innerHeight,drawer:!1,drawer2:!1,canvas:"",manifest:null}},head:function(){return{titleTemplate:null,title:this.$t(this.siteName)}},computed:{style:{get:function(){return this.$store.getters.getStyle},set:function(t){this.$store.commit("setStyle",t)}},xml:{get:function(){return this.$store.getters.getXml},set:function(t){this.$store.commit("setXml",t)}}},mounted:function(){this.loading=!0,window.addEventListener("resize",this.handleResize);var t=this.$route.query.u||"data/small.xml",e=new n.a,r=this;e.getHTML5(t,(function(data){r.xml=data;for(var t=data.getElementsByTagName("tei-graphic"),i=0;i<t.length;i++){var source=t[i];f()(source).removeAttr("url")}f()("#tei").append(data);var e=f()("tei-facsimile").attr("source");r.manifest=e;for(var n=f()("tei-pb"),o=function(t){var e=n[t];if(!f()(e).attr("corresp"))return"continue";var o=f()(e).attr("corresp").replace("#",""),source=f()("#"+o),canvas=source.attr("source");source.text="";var c=f()('<div class="ma-2"><img width="30px" style="cursor: pointer; color: green;" src="'.concat(r.baseUrl,'/img/icons/image-24px.svg"/><span class="ma-1" style="color : #9E9E9E">[Page @').concat(f()(e).attr("corresp"),"]</span></div>"));c.on("click",(function(){r.canvas=canvas})),f()(e).prepend(c),c.after("")},c=0;c<n.length;c++)o(c);r.scroll(),r.loading=!1}))},methods:{handleResize:function(){this.width=window.innerWidth,this.height=window.innerHeight},scroll:function(){var t=this.$route.query;if(t.id){var e=t.id,r={container:"#container",offset:-1*document.querySelector("#container").getBoundingClientRect().width,x:!0};c.a.scrollTo("#"+e,0,r)}}}},D=(r(371),r(414)),N=r(405),X=r(413),A=r(406),B=r(310),M=r(334),z=r(410),H=r(411),U=r(342),G=r(407),J=r(408),W=r(395),F=Object(V.a)(E,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("v-navigation-drawer",{staticStyle:{"z-index":"100000"},attrs:{app:"",temporary:!0,width:384},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("Menu",{attrs:{id:t.$route.query.id}})],1),t._v(" "),r("v-app-bar",{attrs:{flat:""}},[r("v-btn",{attrs:{icon:""},on:{click:function(e){t.drawer=!t.drawer}}},[r("v-icon",[t._v("mdi-view-list")])],1),t._v(" "),r("v-toolbar-title",[r("Title")],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{depressed:"",btn:""}},n),[r("v-icon",{staticClass:"mr-2"},[t._v("mdi-translate")])],1)]}}])},[t._v(" "),r("v-list",[r("v-list-item",{attrs:{to:t.switchLocalePath("ja")}},[r("v-list-item-title",[t._v("日本語")])],1),t._v(" "),r("v-list-item",{attrs:{to:t.switchLocalePath("en")}},[r("v-list-item-title",[t._v("English")])],1)],1)],1)],1)],1),t._v(" "),t.loading?[r("div",{staticClass:"pa-10 text-center"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]:t._e(),t._v(" "),r("v-container",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],attrs:{fluid:""}},[r("v-row",{staticClass:"mt-2"},[r("v-col",{attrs:{cols:"12",sm:t.manifest?6:12}},[r("v-card",{staticClass:"scroll vertical",style:"height: "+.85*t.height+"px; width: "+(t.manifest?t.width/2:t.width)+"px;",attrs:{id:"container",flat:"",outlined:""}},[r("div",{staticClass:"pa-4 px-5"},[r("div",{attrs:{id:"tei"}})])])],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:t.manifest?6:12}},[t.manifest?r("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],style:"height: "+.85*t.height+"px;",attrs:{src:t.baseUrl+"/mirador/?manifest="+t.manifest+"&canvas="+t.canvas+"&bottomPanel=false",width:"100%",allowfullscreen:"allowfullscreen",frameborder:"0"}}):t._e()])],1)],1)],2)}),[],!1,null,null,null);e.default=F.exports;C()(F,{Menu:r(397).default,Title:r(346).default}),C()(F,{VAppBar:D.a,VBtn:N.a,VCard:X.a,VCol:A.a,VContainer:B.a,VIcon:M.a,VList:$.a,VListItem:L.a,VListItemTitle:I.b,VMenu:z.a,VNavigationDrawer:H.a,VProgressCircular:U.a,VRow:G.a,VSpacer:J.a,VToolbarTitle:W.a})}}]);